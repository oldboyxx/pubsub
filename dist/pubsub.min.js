!function(n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():window.pubsub=n()}(function(){var n,l,t,u,r,e,o=[].slice;return r={},n=function(){var n,l,t,u,e,a,c;if(c=arguments[0],n=2<=arguments.length?o.call(arguments,1):[],a=r[c]){for(l=a.length,u=[];l--&&(e=(t=a[l]).callback.apply(t,n),"stop_sub_invocations"!==e);)u.push(void 0);return u}},l=function(){var l,t,u,r,e,a,c,i;for(i=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],e=i.split(" "),a=[],u=0,r=e.length;r>u;u++)c=e[u],c.indexOf(":")>-1?(l=c.split(":"),"-"===l[0][0]?(l[0]=l[0].substring(1),n.apply(null,[l[0]+":"+l[1]].concat(o.call(t))),a.push(n.apply(null,[l[0],l[1]].concat(o.call(t))))):(n.apply(null,[l[0],l[1]].concat(o.call(t))),a.push(n.apply(null,[l[0]+":"+l[1]].concat(o.call(t)))))):a.push(n.apply(null,[c].concat(o.call(t))));return a},t=function(n,l,t,u){var e,o,a,c,i,p,s,f;for(u||"number"!=typeof t?u||t||(t=l,l=null):(u=t,t=l,l=null),null==u&&(u=10),p=n.split(" "),c=0,i=p.length;i>c;c++){for(f=p[c],e=!1,null==r[f]&&(r[f]=[]),o={callback:t,label:l,priority:u},s=r[f],a=s.length;a--;)if(s[a].priority<=u){s.splice(a+1,0,o),e=!0;break}e||r[f].unshift(o)}return t},u=function(n,l,u,r){var a,c,i,p,s,f,h;for(r||"number"!=typeof u?r||u||(a="noCtxAndPrio",u=l,l=null):(a="noCtx",r=u,u=l,l=null),null==r&&(r=10),c=function(){var l;return l=1<=arguments.length?o.call(arguments,0):[],e(n,c),u.apply(null,l)},f=n.split(" "),i=function(n){return"noCtx"===a?t(n,c,r):"noCtxAndPrio"===a?t(n,c):t(n,l,c,r)},p=0,s=f.length;s>p;p++)h=f[p],i(h);return c},e=function(n,l){var t,u,e,o,a,c,i,p;if(l||(l=n,n=null),n){for(o=n.split(" "),a=[],u=0,e=o.length;e>u;u++)p=o[u],r[p]&&(i=r[p],t=i.length,a.push(function(){var n;for(n=[];t--;)i[t].label===l||i[t].callback===l?n.push(i.splice(t,1)):n.push(void 0);return n}()));return a}c=[];for(p in r)i=r[p],t=i.length,c.push(function(){var n;for(n=[];t--;)i[t].label===l||i[t].callback===l?n.push(i.splice(t,1)):n.push(void 0);return n}());return c},{emit:l,pub:l,on:t,sub:t,once:u,subOnce:u,off:e,unsub:e}});