!function(n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():window.pubsub=n()}(function(){var n,l,t,u,r,e,a=[].slice;return r={},n=function(){var n,l,t,u,e,o,c;if(c=arguments[0],n=2<=arguments.length?a.call(arguments,1):[],o=r[c]){for(l=o.length,u=[];l--&&(e=(t=o[l]).callback.apply(t,n),"stop_sub_invocations"!==e);)u.push(void 0);return u}},l=function(){var l,t,u,r,e,o,c,i;for(i=arguments[0],t=2<=arguments.length?a.call(arguments,1):[],e=i.split(" "),o=[],u=0,r=e.length;r>u;u++)c=e[u],c.indexOf(":")>-1?(l=c.split(":"),"-"===l[0][0]?(l[0]=l[0].substring(1),n.apply(null,[l[0]+":"+l[1]].concat(a.call(t))),o.push(n.apply(null,[l[0],l[1]].concat(a.call(t))))):(n.apply(null,[l[0],l[1]].concat(a.call(t))),o.push(n.apply(null,[l[0]+":"+l[1]].concat(a.call(t)))))):o.push(n.apply(null,[c].concat(a.call(t))));return o},t=function(n,l,t,u){var e,a,o,c,i,p,s,f;for(u||"number"!=typeof t?u||t||(t=l,l=null):(u=t,t=l,l=null),null==u&&(u=10),p=n.split(" "),c=0,i=p.length;i>c;c++){for(f=p[c],e=!1,null==r[f]&&(r[f]=[]),a={callback:t,label:l,priority:u},s=r[f],o=s.length;o--;)if(s[o].priority<=u){s.splice(o+1,0,a),e=!0;break}e||r[f].unshift(a)}return t},u=function(n,l,u,r){var o,c,i,p,s,f,h;for(r||"number"!=typeof u?r||u||(o="noCtxAndPrio",u=l,l=null):(o="noCtx",r=u,u=l,l=null),null==r&&(r=10),c=function(){var l;return l=1<=arguments.length?a.call(arguments,0):[],e(n,c),u.apply(null,l)},f=n.split(" "),i=function(n){return"noCtx"===o?t(n,c,r):"noCtxAndPrio"===o?t(n,c):t(n,l,c,r)},p=0,s=f.length;s>p;p++)h=f[p],i(h);return c},e=function(n,l){var t,u,e,a,o,c,i,p;if(l||(l=n,n=null),n){for(a=n.split(" "),o=[],u=0,e=a.length;e>u;u++)p=a[u],r[p]&&(i=r[p],t=i.length,o.push(function(){var n;for(n=[];t--;)i[t].label===l||i[t].callback===l?n.push(i.splice(t,1)):n.push(void 0);return n}()));return o}c=[];for(p in r)i=r[p],t=i.length,c.push(function(){var n;for(n=[];t--;)i[t].label===l||i[t].callback===l?n.push(i.splice(t,1)):n.push(void 0);return n}());return c},{pub:l,sub:t,subOnce:u,unsub:e}});